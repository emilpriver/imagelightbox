!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,n){"use strict";var i=e("<div/>").attr("class","imagelightbox-loading").append(e("<div/>")),o=e("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=e("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),a=o.add(r),l=e("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),c=e("<a/>",{class:"imagelightbox-close"}),s=e("<div/>",{class:"imagelightbox-overlay"}),u=e("<a/>",{href:"#",class:"imagelightbox-navitem"}),g=e("<div/>",{class:"imagelightbox-nav"}),h=e("<div/>",{class:"imagelightbox-wrapper"}),f=e("body"),p=function(){var e=n.body||n.documentElement;return""===(e=e.style).WebkitTransition?"-webkit-":""===e.MozTransition?"-moz-":""===e.OTransition?"-o-":""===e.transition&&""},d=!1!==p(),v=function(e,t,n){var i={},o=p();i[o+"transform"]="translateX("+t+") translateY(-50%)",i[o+"transition"]=o+"transform "+n+"s linear",e.css(i)},b="ontouchstart"in t,m=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,x=function(e){if(b)return!0;if(!m||void 0===e||void 0===e.pointerType)return!1;if(void 0!==e.MSPOINTER_TYPE_MOUSE){if(e.MSPOINTER_TYPE_MOUSE!==e.pointerType)return!0}else if("mouse"!==e.pointerType)return!0;return!1},E=!1!=!!(n.fullscreenEnabled||n.webkitFullscreenEnabled||n.mozFullScreenEnabled||n.msFullscreenEnabled);e.fn.imageLightbox=function(o){function r(e){return e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),!1}function p(){return n.exitFullscreen?n.exitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitExitFullscreen&&n.webkitExitFullscreen(),!1}function w(){r(n.getElementById(y.id).parentElement)||p()}var y=e.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,fullscreen:!1,gutter:10,offsetY:0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},o),q=function(){y.arrows&&M(this),y.navigation&&Y(),y.overlay&&X(),y.button&&F(),y.caption&&h.append(l)},k=function(){y.activity&&C(),y.caption&&P()},O=function(){y.activity&&T(),y.arrows&&a.css("display","block")},S=function(){var e=R.index(z)-1;if(e<0){if(!0===y.quitOnEnd)return A(),!1;e=R.length-1}z=R.eq(e),h.trigger("previous.ilb2"),Q(1)},I=function(){var e=R.index(z)+1;if(e>=R.length){if(!0===y.quitOnEnd)return A(),!1;e=0}z=R.eq(e),h.trigger("next.ilb2"),Q(-1)},C=function(){h.append(i)},T=function(){e(".imagelightbox-loading").remove()},X=function(){h.append(s)},F=function(){c.appendTo(h).on("click.ilb7",function(){return A(),!1})},P=function(){l.html("&nbsp;"),e(z).data("ilb2-caption")?l.html(e(z).data("ilb2-caption")):e(z).find("img").length>0&&l.html(e(z).find("img").attr("alt"))},Y=function(){if(R.length){for(var t=0;t<R.length;t++)g.append(u.clone());var n=g.children("a");n.eq(R.index(z)).addClass("active"),h.on("previous.ilb2 next.ilb2",function(){n.removeClass("active").eq(R.index(z)).addClass("active")}),h.append(g),g.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var t=e(this);if(R.eq(t.index()).attr("href")!==e(".imagelightbox").attr("src")){var n=R.eq(t.index());n.length&&(_=R.index(z),z=n,Q(t.index()<_?-1:1))}t.addClass("active").siblings().removeClass("active")})}},M=function(){h.append(a),a.on("click.ilb7 touchend.ilb7",function(t){return t.stopImmediatePropagation(),t.preventDefault(),e(this).hasClass("imagelightbox-arrow-left")?S():I(),!1})},D="",R=e([]),z=e(),j=e(),L=0,N=0,K=0,U=!1,_=0,B=function(e){var t=y.allowedTypes;if(!/^(?!\|)[\w|]+(?!\|)$/.test(t))return!1;var i=function(e){var t,i,o,r=n.createElement("a"),a={};for(r.href=e,t=r.search.replace(/^\?/,"").split("&"),o=0;o<t.length;o++)a[(i=t[o].split("="))[0]]=i[1];return{protocol:r.protocol,host:r.host,hostname:r.hostname,port:r.port,pathname:r.pathname,search:r.search,searchObject:a,hash:r.hash}}(e.attr("href")).pathname;return new RegExp(t,"i").test(i)},H=function(){if(!j.length)return!0;var n=y.caption?l.outerHeight():0,i=e(t).width(),o=e(t).height()-n,r=Math.abs(1-y.gutter/100),a=new Image;a.src=j.attr("src"),a.onload=function(){if(L=a.width,N=a.height,L>i||N>o){var n=L/N>i/o?L/i:N/o;L/=n,N/=n}var l=N*r,c=L*r,s=(1+y.offsetY/100)*(e(t).height()-l)/2,u=(e(t).width()-c)/2;j.css({width:c+"px",height:l+"px",top:s+"px",left:u+"px"})}},Q=function(n){if(U)return!1;if(j.length){var i={opacity:0};d?v(j,100*n-K+"px",y.animationSpeed/1e3):i.left=parseInt(j.css("left"))+100*n+"px",j.animate(i,y.animationSpeed,function(){W()}),K=0}U=!0,k(),setTimeout(function(){var i=z.attr("href");j=e("<img id='"+y.id+"' />").attr("src",i).on("load.ilb7",function(){var t={opacity:1};if(j.appendTo(h),H(),j.css("opacity",0),d)v(j,-100*n+"px",0),setTimeout(function(){v(j,"0px",y.animationSpeed/1e3)},50);else{var i=parseInt(j.css("left"));t.left=i+"px",j.css("left",i-100*n+"px")}if(j.animate(t,y.animationSpeed,function(){U=!1,O()}),y.preloadNext){var o=R.eq(R.index(z)+1);o.length||(o=R.eq(0)),e("<img />").attr("src",o.attr("href"))}h.trigger("loaded.ilb2")}).on("error.ilb7",function(){O()});var o=0,r=0,a=0,l=!1,c=!1,s=0,u=0,g=!1,f=1,p=1;j.on(m?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(e){if(e.preventDefault(),y.quitOnImgClick)return A(),!1;if(x(e.originalEvent))return!0;var t=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;L/2>t?S():I()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(e){if(!x(e.originalEvent)||y.quitOnImgClick)return!0;"touchstart"==e.type&&2==e.originalEvent.touches.length&&(l=!0,p=Math.sqrt((e.originalEvent.touches[0].screenX-e.originalEvent.touches[1].screenX)*(e.originalEvent.touches[0].screenX-e.originalEvent.touches[1].screenX)+(e.originalEvent.touches[0].screenY-e.originalEvent.touches[1].screenY)*(e.originalEvent.touches[0].screenY-e.originalEvent.touches[1].screenY)),console.log(p)),c||(d&&(a=parseInt(j.css("left"))),o=e.originalEvent.pageX||e.originalEvent.touches[0].pageX),c&&1==e.originalEvent.touches.length&&(s=e.originalEvent.touches[0].screenX,u=e.originalEvent.touches[0].screenY,g=!0)}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(n){if(!c){if(!m&&"pointermove"===n.type||!x(n.originalEvent)||y.quitOnImgClick)return!0;n.preventDefault(),r=n.originalEvent.pageX||n.originalEvent.touches[0].pageX,K=o-r,d?v(j,-K+"px",0):j.css("left",a-K+"px")}g&&(j.css({top:parseInt(j.css("top"))+n.originalEvent.touches[0].screenY-u+"px",left:parseInt(j.css("left"))+n.originalEvent.touches[0].screenX-s+"px"}),s=n.originalEvent.touches[0].screenX,u=n.originalEvent.touches[0].screenY),l&&(f=Math.sqrt((n.originalEvent.touches[0].screenX-n.originalEvent.touches[1].screenX)*(n.originalEvent.touches[0].screenX-n.originalEvent.touches[1].screenX)+(n.originalEvent.touches[0].screenY-n.originalEvent.touches[1].screenY)*(n.originalEvent.touches[0].screenY-n.originalEvent.touches[1].screenY))/p,j.css({width:L*f+"px",height:N*f+"px",top:(e(t).height()-N*f)/2+"px",left:(e(t).width()-L*f)/2+"px"}),c=!0)}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(n){if(!c){if(!x(n.originalEvent)||y.quitOnImgClick)return!0;Math.abs(K)>50?K<0?S():I():d?v(j,"0px",y.animationSpeed/1e3):j.animate({left:a+"px"},y.animationSpeed/2)}if(g&&(g=!1),l&&(l=!1,p=1,c&&f<=1)){var i=Math.abs(1-y.gutter/100);j.css({width:L*i+"px",height:N*i+"px",top:(1+y.offsetY/100)*(e(t).height()-N*i)/2,left:(e(t).width()-L*i)/2}),c=!1}})},y.animationSpeed+100)},W=function(){if(!j.length)return!1;j.remove(),j=e()},$=function(e){if(U)return!1;U=!1,z=e,q(),f.append(h).addClass("imagelightbox-open"),h.trigger("start.ilb2"),Q(0)},A=function(){if(h.trigger("quit.ilb2"),f.removeClass("imagelightbox-open"),!j.length)return!1;j.animate({opacity:0},y.animationSpeed,function(){W(),U=!1,R=e([]),h.remove().find("*").remove()})},G=function(t){function n(){t.filter(function(){return e(this).data("imagelightbox")===D}).filter(function(){return B(e(this))}).each(function(){R=R.add(e(this))})}t.on("click.ilb7",{set:D},function(t){t.preventDefault(),D=e(t.currentTarget).data("imagelightbox"),n(),R.length<1?A():$(e(this))})};return e(t).on("resize.ilb7",H),e(n).ready(function(){y.quitOnDocClick&&e(n).on(b?"touchend.ilb7":"click.ilb7",function(t){j.length&&!e(t.target).is(j)&&(t.preventDefault(),A())}),y.fullscreen&&E&&e(n).on("keydown.ilb7",function(e){if(!j.length)return!0;[9,32,38,40].indexOf(e.which)>-1&&(e.stopPropagation(),e.preventDefault()),[13].indexOf(e.which)>-1&&(e.stopPropagation(),e.preventDefault(),w())}),y.enableKeyboard&&e(n).on("keydown.ilb7",function(e){if(!j.length)return!0;[27].indexOf(e.which)>-1&&y.quitOnEscKey&&(e.stopPropagation(),e.preventDefault(),A()),[37].indexOf(e.which)>-1&&(e.stopPropagation(),e.preventDefault(),S()),[39].indexOf(e.which)>-1&&(e.stopPropagation(),e.preventDefault(),I())})}),e(n).off("click",y.selector),G(e(this)),this.addToImageLightbox=function(e){G(e)},this.loadPreviousImage=function(){S()},this.loadNextImage=function(){I()},this.quitImageLightbox=function(){return A(),this},this.startImageLightbox=function(t){t?t.trigger("click.ilb7"):e(this).trigger("click.ilb7")},this}});