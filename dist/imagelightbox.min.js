!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i){"use strict";var n=e("<div/>").attr("class","imagelightbox-loading").append(e("<div/>")),o=e("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),a=e("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),r=o.add(a),l=e("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),c=e("<a/>",{class:"imagelightbox-close"}),u=e("<div/>",{class:"imagelightbox-overlay"}),s=e("<a/>",{href:"#",class:"imagelightbox-navitem"}),f=e("<div/>",{class:"imagelightbox-nav"}),g=e("<div/>",{class:"imagelightbox-wrapper"}),p=e("body"),d=function(){var e=i.body||i.documentElement;return""===(e=e.style).WebkitTransition?"-webkit-":""===e.MozTransition?"-moz-":""===e.OTransition?"-o-":""===e.transition&&""},h=!1!==d(),b=function(e,t,i){var n={},o=d();n[o+"transform"]="translateX("+t+") translateY(-50%)",n[o+"transition"]=o+"transform "+i+"s linear",e.css(n)},m="ontouchstart"in t,v=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,x=function(e){if(m)return!0;if(!v||void 0===e||void 0===e.pointerType)return!1;if(void 0!==e.MSPOINTER_TYPE_MOUSE){if(e.MSPOINTER_TYPE_MOUSE!==e.pointerType)return!0}else if("mouse"!==e.pointerType)return!0;return!1},y=!1!=!!(i.fullscreenEnabled||i.webkitFullscreenEnabled||i.mozFullScreenEnabled||i.msFullscreenEnabled);e.fn.imageLightbox=function(o){function a(e){return e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),!1}function d(){return i.exitFullscreen?i.exitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen(),!1}function w(){a(i.getElementById(k.id).parentElement)||d()}var k=e.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,fullscreen:!1,gutter:10,offsetY:0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},o),E=function(){k.arrows&&R(this),k.navigation&&M(),k.overlay&&F(),k.button&&P(),k.caption&&g.append(l)},q=function(){k.activity&&I(),k.caption&&D()},O=function(){k.activity&&T(),k.arrows&&r.css("display","block")},S=function(){var e=j.index(X)-1;if(e<0){if(!0===k.quitOnEnd)return A(),!1;e=j.length-1}X=j.eq(e),g.trigger("previous.ilb2"),Q(-1)},C=function(){var e=j.index(X)+1;if(e>=j.length){if(!0===k.quitOnEnd)return A(),!1;e=0}X=j.eq(e),g.trigger("next.ilb2"),Q(1)},I=function(){g.append(n)},T=function(){e(".imagelightbox-loading").remove()},F=function(){g.append(u)},P=function(){c.appendTo(g).on("click.ilb7",function(){return A(),!1})},D=function(){l.html("&nbsp;"),e(X).data("ilb2-caption")?l.html(e(X).data("ilb2-caption")):e(X).find("img").length>0&&l.html(e(X).find("img").attr("alt"))},M=function(){if(j.length){for(var t=0;t<j.length;t++)f.append(s.clone());var i=f.children("a");i.eq(j.index(X)).addClass("active"),g.on("previous.ilb2 next.ilb2",function(){i.removeClass("active").eq(j.index(X)).addClass("active")}),g.append(f),f.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var t=e(this);if(j.eq(t.index()).attr("href")!==e(".imagelightbox").attr("src")){var i=j.eq(t.index());i.length&&(Y=j.index(X),X=i,Q(t.index()<Y?-1:1))}t.addClass("active").siblings().removeClass("active")})}},R=function(){g.append(r),r.on("click.ilb7 touchend.ilb7",function(t){return t.stopImmediatePropagation(),t.preventDefault(),e(this).hasClass("imagelightbox-arrow-left")?S():C(),!1})},z="",j=e([]),X=e(),B=e(),L=0,N=0,K=0,U=!1,Y=0,_=function(e){var t=k.allowedTypes;if(!/^(?!\|)[\w|]+(?!\|)$/.test(t))return!1;var n=function(e){var t,n,o,a=i.createElement("a"),r={};for(a.href=e,t=a.search.replace(/^\?/,"").split("&"),o=0;o<t.length;o++)r[(n=t[o].split("="))[0]]=n[1];return{protocol:a.protocol,host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,searchObject:r,hash:a.hash}}(e.attr("href")).pathname;return new RegExp(t,"i").test(n)},H=function(){if(!B.length)return!0;var i=k.caption?l.outerHeight():0,n=e(t).width(),o=e(t).height()-i,a=Math.abs(1-k.gutter/100),r=new Image;r.src=B.attr("src"),r.onload=function(){if(L=r.width,N=r.height,L>n||N>o){var i=L/N>n/o?L/n:N/o;L/=i,N/=i}var l=N*a,c=L*a,u=(e(t).width()-c)/2;B.css({width:c+"px",height:l+"px",left:u+"px"})}},Q=function(t){if(U)return!1;if(B.length){var i={opacity:0};h?b(B,100*t-K+"px",k.animationSpeed/1e3):i.left=parseInt(B.css("left"))+100*t+"px",B.animate(i,k.animationSpeed,function(){W()}),K=0}U=!0,q(),setTimeout(function(){var i=X.attr("href");B=e("<img id='"+k.id+"' />").attr("src",i).on("load.ilb7",function(){var i={opacity:1};if(B.appendTo(g),H(),B.css("opacity",0),h)b(B,-100*t+"px",0),setTimeout(function(){b(B,"0px",k.animationSpeed/1e3)},50);else{var n=parseInt(B.css("left"));i.left=n+"px",B.css("left",n-100*t+"px")}if(B.animate(i,k.animationSpeed,function(){U=!1,O()}),k.preloadNext){var o=j.eq(j.index(X)+1);o.length||(o=j.eq(0)),e("<img />").attr("src",o.attr("href"))}g.trigger("loaded.ilb2")}).on("error.ilb7",function(){O()});var n=0,o=0,a=0;B.on(v?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(e){if(e.preventDefault(),k.quitOnImgClick)return A(),!1;if(x(e.originalEvent))return!0;var t=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;L/2>t?S():C()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(e){if(!x(e.originalEvent)||k.quitOnImgClick)return!0;h&&(a=parseInt(B.css("left"))),n=e.originalEvent.pageX||e.originalEvent.touches[0].pageX}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(e){if(!v&&"pointermove"===e.type||!x(e.originalEvent)||k.quitOnImgClick)return!0;e.preventDefault(),o=e.originalEvent.pageX||e.originalEvent.touches[0].pageX,K=n-o,h?b(B,-K+"px",0):B.css("left",a-K+"px")}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(e){if(!x(e.originalEvent)||k.quitOnImgClick)return!0;Math.abs(K)>50?K<0?S():C():h?b(B,"0px",k.animationSpeed/1e3):B.animate({left:a+"px"},k.animationSpeed/2)})},k.animationSpeed+100)},W=function(){if(!B.length)return!1;B.remove(),B=e()},$=function(t){if(U)return!1;U=!1,X=t,E(),p.append(g).addClass("imagelightbox-open"),k.lockBody&&e("body").addClass("imagelightbox-scroll-lock"),g.trigger("start.ilb2"),Q(0)},A=function(){if(g.trigger("quit.ilb2"),p.removeClass("imagelightbox-open"),k.lockBody&&e("body").removeClass("imagelightbox-scroll-lock"),!B.length)return!1;B.animate({opacity:0},k.animationSpeed,function(){W(),U=!1,j=e([]),g.remove().find("*").remove()})},G=function(t){function i(){t.filter(function(){return e(this).data("imagelightbox")===z}).filter(function(){return _(e(this))}).each(function(){j=j.add(e(this))})}t.on("click.ilb7",{set:z},function(t){t.preventDefault(),z=e(t.currentTarget).data("imagelightbox"),i(),j.length<1?A():$(e(this))})};return e(t).on("resize.ilb7",H),e(i).ready(function(){k.quitOnDocClick&&e(i).on(m?"touchend.ilb7":"click.ilb7",function(t){B.length&&!e(t.target).is(B)&&(t.preventDefault(),A())}),(k.lockBody||k.fullscreen&&y)&&e(i).on("keydown.ilb7",function(e){if(!B.length)return!0;[9,32,38,40].indexOf(e.which)>-1&&(e.stopPropagation(),e.preventDefault()),[13].indexOf(e.which)>-1&&(e.stopPropagation(),e.preventDefault(),w())}),k.enableKeyboard&&e(i).on("keydown.ilb7",function(e){if(!B.length)return!0;[27].indexOf(e.which)>-1&&k.quitOnEscKey&&(e.stopPropagation(),e.preventDefault(),A()),[37].indexOf(e.which)>-1&&(e.stopPropagation(),e.preventDefault(),S()),[39].indexOf(e.which)>-1&&(e.stopPropagation(),e.preventDefault(),C())})}),e(i).off("click",k.selector),G(e(this)),this.addToImageLightbox=function(e){G(e)},this.loadPreviousImage=function(){S()},this.loadNextImage=function(){C()},this.quitImageLightbox=function(){return A(),this},this.startImageLightbox=function(t){t?t.trigger("click.ilb7"):e(this).trigger("click.ilb7")},this}});