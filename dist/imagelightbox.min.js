!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(C,I,T){"use strict";var F=C("<div/>").attr("class","imagelightbox-loading").append(C("<div/>")),e=C("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),t=C("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),P=e.add(t),D=C("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),M=C("<a/>",{class:"imagelightbox-close"}),R=C("<div/>",{class:"imagelightbox-overlay"}),z=C("<a/>",{href:"#",class:"imagelightbox-navitem"}),X=C("<div/>",{class:"imagelightbox-nav"}),j=C("<div/>",{class:"imagelightbox-wrapper"}),L=C("body"),a=function(){var e=T.body||T.documentElement;return""===(e=e.style).WebkitTransition?"-webkit-":""===e.MozTransition?"-moz-":""===e.OTransition?"-o-":""===e.transition&&""},N=!1!==a(),K=function(e,t,i){var n={},o=a();n[o+"transform"]="translateX("+t+") translateY(-50%)",n[o+"transition"]=o+"transform "+i+"s linear",e.css(n)},U="ontouchstart"in I,Y=I.navigator.pointerEnabled||I.navigator.msPointerEnabled,_=function(e){if(U)return!0;if(!Y||void 0===e||void 0===e.pointerType)return!1;if(void 0!==e.MSPOINTER_TYPE_MOUSE){if(e.MSPOINTER_TYPE_MOUSE!==e.pointerType)return!0}else if("mouse"!==e.pointerType)return!0;return!1},B=!1!=!!(T.fullscreenEnabled||T.webkitFullscreenEnabled||T.mozFullScreenEnabled||T.msFullscreenEnabled);C.fn.imageLightbox=function(e){var i="",a=C([]),r=C(),c=C(),u=0,s=0,l=0,g=!1,n=0,f=C.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,fullscreen:!1,gutter:10,offsetY:0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},e),p=function(){f.activity&&o(),f.arrows&&P.css("display","block")},d=function(){var e=a.index(r)-1;if(e<0){if(!0===f.quitOnEnd)return S(),!1;e=a.length-1}r=a.eq(e),j.trigger("previous.ilb2"),q(1)},h=function(){var e=a.index(r)+1;if(e>=a.length){if(!0===f.quitOnEnd)return S(),!1;e=0}r=a.eq(e),j.trigger("next.ilb2"),q(-1)},t=function(){j.append(F)},o=function(){C(".imagelightbox-loading").remove()},b=function(){j.append(R)},m=function(){M.appendTo(j).on("click.ilb7",function(){return S(),!1})},v=function(){D.html("&nbsp;"),C(r).data("ilb2-caption")?D.html(C(r).data("ilb2-caption")):0<C(r).find("img").length&&D.html(C(r).find("img").attr("alt"))},x=function(){if(a.length){for(var e=0;e<a.length;e++)X.append(z.clone());var t=X.children("a");t.eq(a.index(r)).addClass("active"),j.on("previous.ilb2 next.ilb2",function(){t.removeClass("active").eq(a.index(r)).addClass("active")}),j.append(X),X.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var e=C(this);if(a.eq(e.index()).attr("href")!==C(".imagelightbox").attr("src")){var t=a.eq(e.index());t.length&&(n=a.index(r),r=t,q(e.index()<n?-1:1))}e.addClass("active").siblings().removeClass("active")})}},w=function(){j.append(P),P.on("click.ilb7 touchend.ilb7",function(e){return e.stopImmediatePropagation(),e.preventDefault(),C(this).hasClass("imagelightbox-arrow-left")?d():h(),!1})},y=function(){if(!c.length)return!0;var e=f.caption?D.outerHeight():0,o=C(I).width(),a=C(I).height()-e,r=Math.abs(1-f.gutter/100),l=new Image;l.src=c.attr("src"),l.onload=function(){if(u=l.width,s=l.height,o<u||a<s){var e=o/a<u/s?u/o:s/a;u/=e,s/=e}var t=s*r,i=u*r,n=(C(I).width()-i)/2;c.css({width:i+"px",height:t+"px",left:n+"px"})}},q=function(o){if(g)return!1;if(c.length){var e={opacity:0};N?K(c,100*o-l+"px",f.animationSpeed/1e3):e.left=parseInt(c.css("left"))+100*o+"px",c.animate(e,f.animationSpeed,function(){E()}),l=0}g=!0,f.activity&&t(),f.caption&&v(),setTimeout(function(){var e=r.attr("href"),t=0,i=0,n=0;c=C("<img id='"+f.id+"' />").attr("src",e).on("load.ilb7",function(){var e={opacity:1};if(c.appendTo(j),y(),c.css("opacity",0),N)K(c,-100*o+"px",0),setTimeout(function(){K(c,"0px",f.animationSpeed/1e3)},50);else{var t=parseInt(c.css("left"));e.left=t+"px",c.css("left",t-100*o+"px")}if(c.animate(e,f.animationSpeed,function(){g=!1,p()}),f.preloadNext){var i=a.eq(a.index(r)+1);i.length||(i=a.eq(0)),C("<img />").attr("src",i.attr("href"))}j.trigger("loaded.ilb2")}).on("error.ilb7",function(){p()}).on(Y?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(e){return e.preventDefault(),f.quitOnImgClick?(S(),!1):!!_(e.originalEvent)||void((e.pageX||e.originalEvent.pageX)-e.target.offsetLeft<u/2?d():h())}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(e){if(!_(e.originalEvent)||f.quitOnImgClick)return!0;N&&(n=parseInt(c.css("left"))),t=e.originalEvent.pageX||e.originalEvent.touches[0].pageX}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(e){if(!Y&&"pointermove"===e.type||!_(e.originalEvent)||f.quitOnImgClick)return!0;e.preventDefault(),i=e.originalEvent.pageX||e.originalEvent.touches[0].pageX,l=t-i,N?K(c,-l+"px",0):c.css("left",n-l+"px")}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(e){if(!_(e.originalEvent)||f.quitOnImgClick)return!0;50<Math.abs(l)?l<0?d():h():N?K(c,"0px",f.animationSpeed/1e3):c.animate({left:n+"px"},f.animationSpeed/2)})},f.animationSpeed+100)},E=function(){if(!c.length)return!1;c.remove(),c=C()},k=function(e){if(g)return!1;g=!1,r=e,function(){f.arrows&&w(this),f.navigation&&x(),f.overlay&&b(),f.button&&m(),f.caption&&j.append(D)}(),L.append(j).addClass("imagelightbox-open"),j.trigger("start.ilb2"),q(0)},S=function(){if(j.trigger("quit.ilb2"),L.removeClass("imagelightbox-open"),!c.length)return!1;c.animate({opacity:0},f.animationSpeed,function(){E(),g=!1,a=C([]),j.remove().find("*").remove()})},O=function(t){t.on("click.ilb7",{set:i},function(e){e.preventDefault(),i=C(e.currentTarget).data("imagelightbox"),t.filter(function(){return C(this).data("imagelightbox")===i}).filter(function(){return e=C(this),"a"===C(e).prop("tagName").toLowerCase()&&new RegExp(".("+f.allowedTypes+")$","i").test(C(e).attr("href"));var e}).each(function(){a=a.add(C(this))}),a.length<1?S():k(C(this))})};return C(I).on("resize.ilb7",y),C(T).ready(function(){f.quitOnDocClick&&C(T).on(U?"touchend.ilb7":"click.ilb7",function(e){c.length&&!C(e.target).is(c)&&(e.preventDefault(),S())}),f.fullscreen&&B&&C(T).on("keydown.ilb7",function(e){if(!c.length)return!0;var t;-1<[9,32,38,40].indexOf(e.which)&&(e.stopPropagation(),e.preventDefault()),-1<[13].indexOf(e.which)&&(e.stopPropagation(),e.preventDefault(),(t=T.getElementById(f.id).parentElement).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),T.exitFullscreen?T.exitFullscreen():T.mozCancelFullScreen?T.mozCancelFullScreen():T.webkitExitFullscreen&&T.webkitExitFullscreen())}),f.enableKeyboard&&C(T).on("keydown.ilb7",function(e){if(!c.length)return!0;-1<[27].indexOf(e.which)&&f.quitOnEscKey&&(e.stopPropagation(),e.preventDefault(),S()),-1<[37].indexOf(e.which)&&(e.stopPropagation(),e.preventDefault(),d()),-1<[39].indexOf(e.which)&&(e.stopPropagation(),e.preventDefault(),h())})}),C(T).off("click",f.selector),O(C(this)),this.addToImageLightbox=function(e){O(e)},this.loadPreviousImage=function(){d()},this.loadNextImage=function(){h()},this.quitImageLightbox=function(){return S(),this},this.startImageLightbox=function(e){e?e.trigger("click.ilb7"):C(this).trigger("click.ilb7")},this}});